<!DOCTYPE html>
<html>

<head>
    <title>Upload Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <h1 class="mt-5">Upload Document</h1>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Display form errors if any -->
            {% if form.errors %}
            <ul class="alert alert-danger">
                {% for field in form %}
                {% for error in field.errors %}
                <li>{{ error }}</li>
                {% endfor %}
                {% endfor %}
            </ul>
            {% endif %}

            <!-- Display success message if form submitted successfully -->
            {% if form_submitted %}
            <div class="alert alert-success">Form submitted successfully!</div>
            {% endif %}

            <!-- Display the StageForm fields -->
            <div class="form-group">
                <label for="{{ form.faculté.id_for_label }}">Faculté:</label>
                {{ form.faculté }}
            </div>
            <div class="form-group">
                <label for="{{ form.nom.id_for_label }}">Nom:</label>
                {{ form.nom }}
            </div>
            <div class="form-group">
                <label for="{{ form.prenom.id_for_label }}">Prénom:</label>
                {{ form.prenom }}
            </div>
            <div class="form-group">
                <label for="{{ form.date_de_naissance.id_for_label }}">Date de Naissance:</label>
                {{ form.date_de_naissance }}
            </div>
            <div class="form-group">
                <label for="{{ form.Grade.id_for_label }}">Grade:</label>
                {{ form.Grade }}
            </div>
            <div class="form-group">
                <label for="{{ form.payes_Destiné.id_for_label }}">Payes Destiné:</label>
                {{ form.payes_Destiné }}
            </div>
            <div class="form-group">
                <label for="{{ form.ville.id_for_label }}">Ville:</label>
                {{ form.ville }}
            </div>
            <div class="form-group">
                <label for="{{ form.labo_de_rechercher.id_for_label }}">Labo de Recherche:</label>
                {{ form.labo_de_rechercher }}
            </div>
            <div class="form-group">
                <label for="{{ form.file.id_for_label }}">Dossier de Construction:</label>
                {{ form.file }}
            </div>
            <div class="form-group">
                <label for="{{ form.dossier_construction.id_for_label }}">Dossier de Construction:</label>
                {{ form.dossier_construction }}
            </div>

            <!-- Display the list of criteres with input fields for each -->
            <h2 class="mt-5">Criteria Table</h2>
            <table class="table mt-3">
                <thead>
                    <tr>
                        <th>Criterion</th>
                        <th>points</th>
                        <th>Number of Documents</th>
                    </tr>
                </thead>
                <tbody>
                    {% for critere in criteres %}
                    <tr>
                        <td>{{ critere }}</td>
                        <td>{{ critere.points }}</td>
                        <td>
                            <input type="number" name="nombre" id="nombre_{{ critere.id }}" class="form-control"
                                placeholder="Number of documents">
                            <input type="hidden" name="critere" value="{{ critere.id }}">
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <button type="submit" class="btn btn-success mt-3 mb-3">Upload</button>
        </form>
    </div>
</body>

</html>